var pn=Object.create;var ve=Object.defineProperty;var mn=Object.getOwnPropertyDescriptor;var gn=Object.getOwnPropertyNames;var xn=Object.getPrototypeOf,bn=Object.prototype.hasOwnProperty;var vn=(e,t,n)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var wn=e=>ve(e,"__esModule",{value:!0});var En=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var yn=(e,t,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of gn(t))!bn.call(e,r)&&r!=="default"&&ve(e,r,{get:()=>t[r],enumerable:!(n=mn(t,r))||n.enumerable});return e},Sn=e=>yn(wn(ve(e!=null?pn(xn(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Ne=(e,t,n)=>(vn(e,typeof t!="symbol"?t+"":t,n),n);var Bt=En((Ro,Ke)=>{(function(e,t){typeof Ke!="undefined"?Ke.exports=t():typeof define=="function"&&typeof define.amd=="object"?define(t):this[e]=t()})("Clusterize",function(){"use strict";var e=function(){for(var c=3,a=document.createElement("b"),l=a.all||[];a.innerHTML="<!--[if gt IE "+ ++c+"]><i><![endif]-->",l[0];);return c>4?c:document.documentMode}(),t=navigator.platform.toLowerCase().indexOf("mac")+1,n=function(c){if(!(this instanceof n))return new n(c);var a=this,l={rows_in_block:50,blocks_in_cluster:4,tag:null,show_no_data_row:!0,no_data_class:"clusterize-no-data",no_data_text:"No data",keep_parity:!0,callbacks:{}};a.options={};for(var f=["rows_in_block","blocks_in_cluster","show_no_data_row","no_data_class","no_data_text","keep_parity","tag","callbacks"],u=0,d;d=f[u];u++)a.options[d]=typeof c[d]!="undefined"&&c[d]!=null?c[d]:l[d];for(var h=["scroll","content"],u=0,p;p=h[u];u++)if(a[p+"_elem"]=c[p+"Id"]?document.getElementById(c[p+"Id"]):c[p+"Elem"],!a[p+"_elem"])throw new Error("Error! Could not find "+p+" element");a.content_elem.hasAttribute("tabindex")||a.content_elem.setAttribute("tabindex",0);var m=s(c.rows)?c.rows:a.fetchMarkup(),x={},w=a.scroll_elem.scrollTop;a.insertToDOM(m,x),a.scroll_elem.scrollTop=w;var T=!1,y=0,b=!1,g=function(){t&&(b||(a.content_elem.style.pointerEvents="none"),b=!0,clearTimeout(y),y=setTimeout(function(){a.content_elem.style.pointerEvents="auto",b=!1},50)),T!=(T=a.getClusterNum())&&a.insertToDOM(m,x),a.options.callbacks.scrollingProgress&&a.options.callbacks.scrollingProgress(a.getScrollProgress())},$=0,M=function(){clearTimeout($),$=setTimeout(a.refresh,100)};r("scroll",a.scroll_elem,g),r("resize",window,M),a.destroy=function(L){o("scroll",a.scroll_elem,g),o("resize",window,M),a.html((L?a.generateEmptyRow():m).join(""))},a.refresh=function(L){(a.getRowsHeight(m)||L)&&a.update(m)},a.update=function(L){m=s(L)?L:[];var k=a.scroll_elem.scrollTop;m.length*a.options.item_height<k&&(a.scroll_elem.scrollTop=0,T=0),a.insertToDOM(m,x),a.scroll_elem.scrollTop=k},a.clear=function(){a.update([])},a.getRowsAmount=function(){return m.length},a.getScrollProgress=function(){return this.options.scroll_top/(m.length*this.options.item_height)*100||0};var _=function(L,k){var R=s(k)?k:[];!R.length||(m=L=="append"?m.concat(R):R.concat(m),a.insertToDOM(m,x))};a.append=function(L){_("append",L)},a.prepend=function(L){_("prepend",L)}};n.prototype={constructor:n,fetchMarkup:function(){for(var c=[],a=this.getChildNodes(this.content_elem);a.length;)c.push(a.shift().outerHTML);return c},exploreEnvironment:function(c,a){var l=this.options;l.content_tag=this.content_elem.tagName.toLowerCase(),!!c.length&&(e&&e<=9&&!l.tag&&(l.tag=c[0].match(/<([^>\s/]*)/)[1].toLowerCase()),this.content_elem.children.length<=1&&(a.data=this.html(c[0]+c[0]+c[0])),l.tag||(l.tag=this.content_elem.children[0].tagName.toLowerCase()),this.getRowsHeight(c))},getRowsHeight:function(c){var a=this.options,l=a.item_height;if(a.cluster_height=0,!!c.length){var f=this.content_elem.children;if(!!f.length){var u=f[Math.floor(f.length/2)];if(a.item_height=u.offsetHeight,a.tag=="tr"&&i("borderCollapse",this.content_elem)!="collapse"&&(a.item_height+=parseInt(i("borderSpacing",this.content_elem),10)||0),a.tag!="tr"){var d=parseInt(i("marginTop",u),10)||0,h=parseInt(i("marginBottom",u),10)||0;a.item_height+=Math.max(d,h)}return a.block_height=a.item_height*a.rows_in_block,a.rows_in_cluster=a.blocks_in_cluster*a.rows_in_block,a.cluster_height=a.blocks_in_cluster*a.block_height,l!=a.item_height}}},getClusterNum:function(){return this.options.scroll_top=this.scroll_elem.scrollTop,Math.floor(this.options.scroll_top/(this.options.cluster_height-this.options.block_height))||0},generateEmptyRow:function(){var c=this.options;if(!c.tag||!c.show_no_data_row)return[];var a=document.createElement(c.tag),l=document.createTextNode(c.no_data_text),f;return a.className=c.no_data_class,c.tag=="tr"&&(f=document.createElement("td"),f.colSpan=100,f.appendChild(l)),a.appendChild(f||l),[a.outerHTML]},generate:function(c,a){var l=this.options,f=c.length;if(f<l.rows_in_block)return{top_offset:0,bottom_offset:0,rows_above:0,rows:f?c:this.generateEmptyRow()};var u=Math.max((l.rows_in_cluster-l.rows_in_block)*a,0),d=u+l.rows_in_cluster,h=Math.max(u*l.item_height,0),p=Math.max((f-d)*l.item_height,0),m=[],x=u;h<1&&x++;for(var w=u;w<d;w++)c[w]&&m.push(c[w]);return{top_offset:h,bottom_offset:p,rows_above:x,rows:m}},renderExtraTag:function(c,a){var l=document.createElement(this.options.tag),f="clusterize-";return l.className=[f+"extra-row",f+c].join(" "),a&&(l.style.height=a+"px"),l.outerHTML},insertToDOM:function(c,a){this.options.cluster_height||this.exploreEnvironment(c,a);var l=this.generate(c,this.getClusterNum()),f=l.rows.join(""),u=this.checkChanges("data",f,a),d=this.checkChanges("top",l.top_offset,a),h=this.checkChanges("bottom",l.bottom_offset,a),p=this.options.callbacks,m=[];u||d?(l.top_offset&&(this.options.keep_parity&&m.push(this.renderExtraTag("keep-parity")),m.push(this.renderExtraTag("top-space",l.top_offset))),m.push(f),l.bottom_offset&&m.push(this.renderExtraTag("bottom-space",l.bottom_offset)),p.clusterWillChange&&p.clusterWillChange(),this.html(m.join("")),this.options.content_tag=="ol"&&this.content_elem.setAttribute("start",l.rows_above),this.content_elem.style["counter-increment"]="clusterize-counter "+(l.rows_above-1),p.clusterChanged&&p.clusterChanged()):h&&(this.content_elem.lastChild.style.height=l.bottom_offset+"px")},html:function(c){var a=this.content_elem;if(e&&e<=9&&this.options.tag=="tr"){var l=document.createElement("div"),f;for(l.innerHTML="<table><tbody>"+c+"</tbody></table>";f=a.lastChild;)a.removeChild(f);for(var u=this.getChildNodes(l.firstChild.firstChild);u.length;)a.appendChild(u.shift())}else a.innerHTML=c},getChildNodes:function(c){for(var a=c.children,l=[],f=0,u=a.length;f<u;f++)l.push(a[f]);return l},checkChanges:function(c,a,l){var f=a!=l[c];return l[c]=a,f}};function r(c,a,l){return a.addEventListener?a.addEventListener(c,l,!1):a.attachEvent("on"+c,l)}function o(c,a,l){return a.removeEventListener?a.removeEventListener(c,l,!1):a.detachEvent("on"+c,l)}function s(c){return Object.prototype.toString.call(c)==="[object Array]"}function i(c,a){return window.getComputedStyle?window.getComputedStyle(a)[c]:a.currentStyle[c]}return n})});var W={};function rt(e){W.context=e}function Cn(){return{...W.context,id:`${W.context.id}${W.context.count++}.`,count:0}}var Tn=(e,t)=>e===t,Ir=Symbol("solid-proxy"),we={equals:Tn},ot=null,st=mt,ee={},te=1,Ee=2,lt={owned:null,cleanups:null,context:null,owner:null},[Pr,it]=K(!1),A=null,S=null,P=null,ie=null,H=null,U=null,ct=0;function ce(e,t){t&&(A=t);let n=P,r=A,o=e.length===0?lt:{owned:null,cleanups:null,context:null,owner:r,attached:!!t};A=o,P=null;let s;try{Pe(()=>s=e(()=>ue(o)),!0)}finally{P=n,A=r}return s}function K(e,t){t=t?Object.assign({},we,t):we;let n={value:e,observers:null,observerSlots:null,pending:ee,comparator:t.equals||void 0};return[ht.bind(n),r=>(typeof r=="function"&&(S&&S.running&&S.sources.has(n)?r=r(n.pending!==ee?n.pending:n.tValue):r=r(n.pending!==ee?n.pending:n.value)),Ie(n,r))]}function _n(e,t,n){ae(Se(e,t,!0))}function X(e,t,n){ae(Se(e,t,!1))}function ye(e,t,n){st=kn;let r=Se(e,t,!1),o=dt&&Re(A,dt.id);o&&(r.suspense=o),r.user=!0,U&&U.push(r)}function B(e,t,n){n=n?Object.assign({},we,n):we;let r=Se(e,t,!0);return r.pending=ee,r.observers=null,r.observerSlots=null,r.state=0,r.comparator=n.equals||void 0,ae(r),ht.bind(r)}function at(e){if(ie)return e();let t,n=ie=[];try{t=e()}finally{ie=null}return Pe(()=>{for(let r=0;r<n.length;r+=1){let o=n[r];if(o.pending!==ee){let s=o.pending;o.pending=ee,Ie(o,s)}}},!1),t}function q(e){let t,n=P;return P=null,t=e(),P=n,t}function ft(e){return A===null||(A.cleanups===null?A.cleanups=[e]:A.cleanups.push(e)),e}function Ln(e){let t=Symbol("context");return{id:t,Provider:Mn(t),defaultValue:e}}function ut(e){let t=B(e);return B(()=>Be(t()))}var dt;function ht(){if(this.state&&this.sources){let e=H;H=null,this.state===te?ae(this):je(this),H=e}if(P){let e=this.observers?this.observers.length:0;P.sources?(P.sources.push(this),P.sourceSlots.push(e)):(P.sources=[this],P.sourceSlots=[e]),this.observers?(this.observers.push(P),this.observerSlots.push(P.sources.length-1)):(this.observers=[P],this.observerSlots=[P.sources.length-1])}return S&&S.running&&S.sources.has(this)?this.tValue:this.value}function Ie(e,t,n){if(e.comparator){if(S&&S.running&&S.sources.has(e)){if(e.comparator(e.tValue,t))return t}else if(e.comparator(e.value,t))return t}return ie?(e.pending===ee&&ie.push(e),e.pending=t,t):(S?((S.running||!n&&S.sources.has(e))&&(S.sources.add(e),e.tValue=t),S.running||(e.value=t)):e.value=t,e.observers&&(!H||e.observers.length)&&Pe(()=>{for(let r=0;r<e.observers.length;r+=1){let o=e.observers[r];S&&S.running&&S.disposed.has(o)||(o.observers&&o.state!==Ee&&gt(o),o.state=te,o.pure?H.push(o):U.push(o))}if(H.length>1e6)throw H=[],new Error},!1),t)}function ae(e){if(!e.fn)return;ue(e);let t=A,n=P,r=ct;P=A=e,pt(e,e.value,r),S&&!S.running&&S.sources.has(e)&&(S.running=!0,pt(e,e.tValue,r),S.running=!1),P=n,A=t}function pt(e,t,n){let r;try{r=e.fn(t)}catch(o){bt(o)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?Ie(e,r,!0):S&&S.running&&e.pure?(S.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=n)}function Se(e,t,n,r){let o={fn:e,state:te,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:A,context:null,pure:n};return A===null||A!==lt&&(S&&S.running&&A.pure?A.tOwned?A.tOwned.push(o):A.tOwned=[o]:A.owned?A.owned.push(o):A.owned=[o]),o}function fe(e){let t=e.state===te&&e,n;if(e.suspense&&q(e.suspense.inFallback))return e.suspense.effects.push(e);let r=S&&S.running;for(;(e.fn||r&&e.attached)&&(e=e.owner);){if(r&&S.disposed.has(e))return;e.state===Ee?n=e:e.state===te&&(t=e,n=void 0)}if(n){let o=H;if(H=null,je(n),H=o,!t||t.state!==te)return;if(r){for(e=t;(e.fn||e.attached)&&(e=e.owner);)if(S.disposed.has(e))return}}t&&ae(t)}function Pe(e,t){if(H)return e();let n=!1;t||(H=[]),U?n=!0:U=[],ct++;try{e()}catch(r){bt(r)}finally{$n(n)}}function $n(e){if(H&&(mt(H),H=null),e)return;let t;if(S&&S.running){if(S.promises.size){S.running=!1,S.effects.push.apply(S.effects,U),U=null,it(!0);return}let n=S.sources;t=S.cb,S=null,at(()=>{n.forEach(r=>{if(r.value=r.tValue,r.owned)for(let o=0,s=r.owned.length;o<s;o++)ue(r.owned[o]);r.tOwned&&(r.owned=r.tOwned),delete r.tValue,delete r.tOwned}),it(!1)})}U.length?at(()=>{st(U),U=null}):U=null,t&&t.forEach(n=>n())}function mt(e){for(let t=0;t<e.length;t++)fe(e[t])}function kn(e){let t,n=0;for(t=0;t<e.length;t++){let o=e[t];o.user?e[n++]=o:fe(o)}let r=e.length;for(t=0;t<n;t++)fe(e[t]);for(t=r;t<e.length;t++)fe(e[t])}function je(e){e.state=0;for(let t=0;t<e.sources.length;t+=1){let n=e.sources[t];n.sources&&(n.state===te?fe(n):n.state===Ee&&je(n))}}function gt(e){for(let t=0;t<e.observers.length;t+=1){let n=e.observers[t];n.state||(n.state=Ee,n.observers&&gt(n))}}function ue(e){let t;if(e.sources)for(;e.sources.length;){let n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){let s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(S&&S.running&&e.pure){if(e.tOwned){for(t=0;t<e.tOwned.length;t++)ue(e.tOwned[t]);delete e.tOwned}xt(e,!0)}else if(e.owned){for(t=0;t<e.owned.length;t++)ue(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function xt(e,t){if(t||(e.state=0,S.disposed.add(e)),e.owned)for(let n=0;n<e.owned.length;n++)xt(e.owned[n])}function bt(e){let t=ot&&Re(A,ot);if(!t)throw e;t.forEach(n=>n(e))}function Re(e,t){return e&&(e.context&&e.context[t]||e.owner&&Re(e.owner,t))}function Be(e){if(typeof e=="function"&&!e.length)return Be(e());if(Array.isArray(e)){let t=[];for(let n=0;n<e.length;n++){let r=Be(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Mn(e){return function(n){let r;return _n(()=>r=q(()=>(A.context={[e]:n.value},ut(()=>n.children)))),r}}var An=Symbol("fallback");function vt(e){for(let t=0;t<e.length;t++)e[t]()}function Dn(e,t,n={}){let r=[],o=[],s=[],i=0,c=t.length>1?[]:null,a=A;return ft(()=>vt(s)),()=>{let l=e()||[],f,u;return q(()=>{let h=l.length,p,m,x,w,T,y,b,g,$;if(h===0)i!==0&&(vt(s),s=[],r=[],o=[],i=0,c&&(c=[])),n.fallback&&(r=[An],o[0]=ce(M=>(s[0]=M,n.fallback()),a),i=1);else if(i===0){for(o=new Array(h),u=0;u<h;u++)r[u]=l[u],o[u]=ce(d,a);i=h}else{for(x=new Array(h),w=new Array(h),c&&(T=new Array(h)),y=0,b=Math.min(i,h);y<b&&r[y]===l[y];y++);for(b=i-1,g=h-1;b>=y&&g>=y&&r[b]===l[g];b--,g--)x[g]=o[b],w[g]=s[b],c&&(T[g]=c[b]);for(p=new Map,m=new Array(g+1),u=g;u>=y;u--)$=l[u],f=p.get($),m[u]=f===void 0?-1:f,p.set($,u);for(f=y;f<=b;f++)$=r[f],u=p.get($),u!==void 0&&u!==-1?(x[u]=o[f],w[u]=s[f],c&&(T[u]=c[f]),u=m[u],p.set($,u)):s[f]();for(u=y;u<h;u++)u in x?(o[u]=x[u],s[u]=w[u],c&&(c[u]=T[u],c[u](u))):o[u]=ce(d,a);o=o.slice(0,i=h),r=l.slice(0)}return o});function d(h){if(s[u]=h,c){let[p,m]=K(u);return c[u]=m,t(l[u],p)}return t(l[u])}}}function C(e,t){if(W.context){let n=W.context;rt(Cn());let r=q(()=>e(t));return rt(n),r}return q(()=>e(t))}function G(e){let t="fallback"in e&&{fallback:()=>e.fallback};return B(Dn(()=>e.each,e.children,t||void 0))}function oe(e){let t=!1,n=B(()=>e.when,void 0,{equals:(r,o)=>t?r===o:!r==!o});return B(()=>{let r=n();if(r){let o=e.children;return(t=typeof o=="function"&&o.length>0)?q(()=>o(r)):o}return e.fallback})}function Fe(e){let t=!1,n=ut(()=>e.children),r=B(()=>{let o=n();Array.isArray(o)||(o=[o]);for(let s=0;s<o.length;s++){let i=o[s].when;if(i)return[s,i,o[s]]}return[-1]},void 0,{equals:(o,s)=>o&&o[0]===s[0]&&(t?o[1]===s[1]:!o[1]==!s[1])&&o[2]===s[2]});return B(()=>{let[o,s,i]=r();if(o<0)return e.fallback;let c=i.children;return(t=typeof c=="function"&&c.length>0)?q(()=>c(s)):c})}function V(e){return e}var jr=Ln();var On=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","truespeed"],Yr=new Set(["className","indeterminate","value",...On]),Wr=new Set(["innerHTML","textContent","innerText","children"]);var Kr=new Set(["beforeinput","click","dblclick","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),qr=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]);function wt(e,t){return B(e,void 0,t?void 0:{equals:t})}function Et(e,t,n){let r=n.length,o=t.length,s=r,i=0,c=0,a=t[o-1].nextSibling,l=null;for(;i<o||c<s;){if(t[i]===n[c]){i++,c++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){let f=s<r?c?n[c-1].nextSibling:n[s-c]:a;for(;c<s;)e.insertBefore(n[c++],f)}else if(s===c)for(;i<o;)(!l||!l.has(t[i]))&&e.removeChild(t[i]),i++;else if(t[i]===n[s-1]&&n[c]===t[o-1]){let f=t[--o].nextSibling;e.insertBefore(n[c++],t[i++].nextSibling),e.insertBefore(n[--s],f),t[o]=n[s]}else{if(!l){l=new Map;let u=c;for(;u<s;)l.set(n[u],u++)}let f=l.get(t[i]);if(f!=null)if(c<f&&f<s){let u=i,d=1,h;for(;++u<o&&u<s&&!((h=l.get(t[u]))==null||h!==f+d);)d++;if(d>f-c){let p=t[i];for(;c<f;)e.insertBefore(n[c++],p)}else e.replaceChild(n[c++],t[i++])}else i++;else e.removeChild(t[i++])}}}var yt=Symbol("delegated-events");function He(e,t,n){let r;return ce(o=>{r=o,O(t,e(),t.firstChild?null:void 0,n)}),()=>{r(),t.textContent=""}}function D(e,t,n){let r=document.createElement("template");r.innerHTML=e;let o=r.content.firstChild;return n&&(o=o.firstChild),o}function St(e,t=window.document){let n=t[yt]||(t[yt]=new Set);for(let r=0,o=e.length;r<o;r++){let s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,Nn))}}function Ct(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function O(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Ce(e,t,r,n);X(o=>Ce(e,t(),o,n),r)}function Nn(e){let t=`$$${e.type}`,n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n}});n!==null;){let r=n[t];if(r){let o=n[`${t}Data`];if(o!==void 0?r(o,e):r(e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function Ce(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;let s=typeof t,i=r!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),i){let c=n[0];c&&c.nodeType===3?c.data=t:c=document.createTextNode(t),n=de(e,n,r,c)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||s==="boolean"){if(W.context)return n;n=de(e,n,r)}else{if(s==="function")return X(()=>{let c=t();for(;typeof c=="function";)c=c();n=Ce(e,c,n,r)}),()=>n;if(Array.isArray(t)){let c=[];if(Ve(c,t,o))return X(()=>n=Ce(e,c,n,r,!0)),()=>n;if(W.context&&n.length)return n;if(c.length===0){if(n=de(e,n,r),i)return n}else Array.isArray(n)?n.length===0?Tt(e,c,r):Et(e,n,c):n==null||n===""?Tt(e,c):Et(e,i&&n||[e.firstChild],c);n=c}else if(t instanceof Node){if(Array.isArray(n)){if(i)return n=de(e,n,r,t);de(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Ve(e,t,n){let r=!1;for(let o=0,s=t.length;o<s;o++){let i=t[o],c;if(i instanceof Node)e.push(i);else if(!(i==null||i===!0||i===!1))if(Array.isArray(i))r=Ve(e,i)||r;else if((c=typeof i)==="string")e.push(document.createTextNode(i));else if(c==="function")if(n){for(;typeof i=="function";)i=i();r=Ve(e,Array.isArray(i)?i:[i])||r}else e.push(i),r=!0;else e.push(document.createTextNode(i.toString()))}return r}function Tt(e,t,n){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function de(e,t,n,r){if(n===void 0)return e.textContent="";let o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){let c=t[i];if(o!==c){let a=c.parentNode===e;!s&&!i?a?e.replaceChild(o,c):e.insertBefore(o,n):a&&e.removeChild(c)}else s=!0}}else e.insertBefore(o,n);return[o]}var E=(e,t)=>{if(e){for(let n of e)if(n[0]===t)return n[1]}};var Te=()=>Object.create(null),_t=(e,t)=>{switch(e){default:{let n=[],r=[];for(let o of t)o[0]===0&&n.push(r=[]),r.push(o);return n}case"HEADER":{let n=Te(),r=[];for(let o of t)o[0]===9?n[o[1]]=r=[]:r.push(o);return n}case"CLASSES":{let n=Te(),r=[];for(let o of t)o[0]===0?r=[]:o[0]===1?n[o[1]]=r:r.push(o);return n}case"TABLES":{let n=Te(),r=[],o=[];for(let s of t)s[0]===0?(o=[],s[1]==="TABLE"?r=[o]:s[1]!=="ENDTAB"&&r.push(o)):s[0]===2&&E(o,0)==="TABLE"&&(n[s[1]]=r),o.push(s);return n}case"BLOCKS":{let n=Te(),r=[],o=[];for(let s of t)s[0]===0?(o=[],s[1]==="BLOCK"?r=[o]:r.push(o)):s[0]===2&&E(o,0)==="BLOCK"&&(n[s[1]]=r),o.push(s);return n}case"OBJECTS":{let n=[],r=[];for(let o of t)o[0]===0&&n.push(r=[]),r.push(o);return n}case"ACDSDATA":{let n=[],r=[n],o=[r];for(let s of t)s[0]===0?(o.push(r=[]),r.push(n=[])):s[0]===2&&r.push(n=[]),n.push(s);return o}}};function Lt(e){let t=e.split(/\r\n|\r|\n/),n=Math.floor(t.length/2),r=Array(n);for(let o=0;o<n;o++)r[o]=[parseInt(t[o+o],10),t[o+o+1]];return r}function $t(e){let t=[];for(let n=1;n<e.length;n++)if(e[n-1][0]===0&&e[n-1][1]==="SECTION"&&e[n][0]===2){let r=n;for(;++n<e.length&&(e[n][0]!==0||e[n][1]!=="ENDSEC"););t.push({name:e[r][1],startIndex:r+1,endIndex:n})}return t}var kt=(e,t)=>{let n=Lt(e);for(let{name:r,startIndex:o,endIndex:s}of $t(n))if(r===t)return _t(r,n.slice(o,s))},ze=e=>{let t=Object.create(null),n=Lt(e);for(let{name:r,startIndex:o,endIndex:s}of $t(n))t[r]=_t(r,n.slice(o,s));return t};var In={cp874:"dos-874",cp932:"ms932",cp936:"gbk",cp949:"windows-949",cp950:"csbig5",cp1361:"johab","mac-roman":"mac"},Pn=e=>{let t=e.trim().toLowerCase().replace(/^dos|^ansi_/,"cp").replace(/^iso8859_/,"iso8859-");return In[t]||t},jn={ja:"ms932"},_e=(e,t)=>{let n=t?.encoding,o=new TextDecoder(n?Pn(n):void 0).decode(e);if(!n){let s=kt(o,"HEADER"),i=E(s?.$ACADVER,1);if(!i||i<"AC1021"){let c=E(s?.$DWGCODEPAGE,3)??jn[navigator.language]??"cp1252";return _e(e,{encoding:c})}}return ze(o)};var Le=(e,t)=>{for(let[n,r]of t)e+=n,e+=`
`,e+=r,e+=`
`;return e},Ge=e=>{let t="";for(let n in e){t+=`0
SECTION
2
`,t+=n,t+=`
`;let r=e[n];switch(n){default:for(let o of r)t=Le(t,o);break;case"HEADER":for(let o in r){t+=`9
`,t+=o,t+=`
`;let s=r[o];for(let[i,c]of s)t+=i,t+=`
`,t+=c,t+=`
`}break;case"CLASSES":for(let o in r){let s=r[o];t+=`0
CLASS
1
`,t+=o,t+=`
`;for(let[i,c]of s)i!==0&&(t+=i,t+=`
`,t+=c,t+=`
`)}break;case"TABLES":for(let o in r){for(let s of r[o])t=Le(t,s);t+=`0
ENDTAB
`}break;case"BLOCKS":for(let o in r)for(let s of r[o])t=Le(t,s);break;case"OBJECTS":for(let o of r)for(let[s,i]of o)t+=s,t+=`
`,t+=i,t+=`
`;break;case"ACDSDATA":for(let o of r)for(let s of o)t=Le(t,s);break}t+=`0
ENDSEC
`}return t+=`0
EOF
`,t};var j=(e,t)=>{let n=[];if(e)for(let r of e)r[0]===t&&n.push(r[1]);return n};var Rn=window.DOMMatrix||window.WebKitCSSMatrix||window.MSCSSMatrix;function Mt(e,t,n){return e<t?t:e>n?n:e}function he(e,t){var n=new Rn(t.style.transform);return[n.a,e.scrollLeft-n.e,e.scrollTop-n.f]}function $e(e,t,n,r,o){var s=Math.round(Math.max(r,0)),i=Math.round(Math.max(o,0));t.setAttribute("transform",t.style.transform="matrix("+n+",0,0,"+n+","+(s-r)+","+(i-o)+")"),t.style.margin=0,e.scrollLeft=s,e.scrollTop=i,e.scrollLeft!==s&&(t.style.marginRight=s+"px",e.scrollLeft=s),e.scrollTop!==i&&(t.style.marginBottom=i+"px",e.scrollTop=i)}var Bn=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.msMatchesSelector,Fn=Element.prototype.closest?function(e,t){return e&&e.closest(t)}:function(e,t){for(;e&&!Bn.call(e,t);)e=e.parentNode instanceof Element?e.parentNode:null;return e};function Ue(e){var t={};if(e)for(var n=0,r=e.split(";");n<r.length;n++){var o=r[n],s=o.indexOf(":");t[o.slice(0,s).trim().replace(/[a-zA-Z0-9_]-[a-z]/g,function(i){return i[0]+i[2].toUpperCase()})]=o.slice(s+1).trim()}return t}function ke(e,t){var n=Fn(e,"["+t+"]");return n instanceof HTMLElement?[n,Ue(n.getAttribute(t))]:[]}function At(){}var Xe=!1;try{Ye=Object.defineProperty({},"passive",{get:function(){Xe=!0}}),addEventListener("t",At,Ye),removeEventListener("t",At,Ye)}catch(e){Xe=!1}var Ye,Dt=Xe?{passive:!1}:void 0;function Ot(e,t,n){var r=e.firstElementChild,o=he(e,r),s=o[0],i=o[1],c=o[2];$e(e,r,s,i+t,c+n)}var Nt=function(e){return e.preventDefault()};function It(e,t){addEventListener("mousedown",function(n){if(!(n.button!==0&&n.button!==2)){var r=ke(n.target,e),o=r[0],s=r[1];if(!(!o||!s||!Hn(n,s,t))){n.preventDefault();var i=n.clientX,c=n.clientY,a=function(f){Ot(o,i-f.clientX,c-f.clientY),i=f.clientX,c=f.clientY,f.preventDefault()},l=function(){removeEventListener("mouseup",l),removeEventListener("mousemove",a),removeEventListener("contextmenu",Nt)};addEventListener("mouseup",l),addEventListener("mousemove",a),addEventListener("contextmenu",Nt)}}})}function Hn(e,t,n){return(!t.modifier||e.getModifierState(t.modifier))&&e.button===((t.button||n.button)==="right"?2:0)}function Vn(e){return he(e,e.firstElementChild)[0]}function zn(e,t,n){n===void 0&&(n={});var r=Mt(t,n.minScale||1,n.maxScale||10),o=n.origin,s=e.firstElementChild,i=he(e,s),c=i[0],a=i[1],l=i[2];if(r!==c){var f=r/c-1,u=s.getBoundingClientRect(),d=(o&&o.clientX||0)-u.left,h=(o&&o.clientY||0)-u.top,p=a+f*d,m=l+f*h;$e(e,s,r,p,m)}}function We(e,t,n){zn(e,Vn(e)*t,n)}function Pt(e,t,n){n===void 0&&(n={}),n.noEmitStyle||((document.head||document.body||document.documentElement).appendChild(document.createElement("style")).textContent="["+e+"]{overflow:scroll}["+e+"]>:first-child{width:100%;height:100%;vertical-align:middle;transform-origin:0 0}"),addEventListener("wheel",function(r){var o=ke(r.target,e),s=o[0],i=o[1];if(s instanceof HTMLElement){var c=+i.zoomAmount||t.zoomAmount;We(s,Math.pow(1+c,-r.deltaY),{origin:r,minScale:+i.minScale||t.minScale,maxScale:+i.maxScale||t.maxScale}),r.preventDefault()}},Dt),addEventListener("resize",function(){for(var r=document.querySelectorAll("["+e+"]"),o=0;o<r.length;o++){var s=r[o];if(s instanceof HTMLElement){var i=Ue(s.getAttribute(e));We(s,1,i)}}})}It("data-pan-on-drag",{button:"left"});Pt("data-zoom-on-wheel",{minScale:1,maxScale:10,zoomAmount:.002});var[N,jt]=K({}),[F,pe]=K(""),[Me,Rt]=K("");var Ft=Sn(Bt());var Gn=D('<div class="clusterize"><div class="clusterize-header-scroll"><table><thead><tr></tr></thead></table></div><div class="clusterize-scroll"><table><tbody class="clusterize-content"></tbody></table></div></div>',16),Un=D("<th></th>",2),Xn=e=>e.endsWith("</td>")?e:`<td>${e}</td>`,ne=({columns:e,records:t,tdSelector:n})=>{let r,o=e.map(f=>n(f)),s=B(()=>t.map(f=>`<tr>${o.map(u=>Xn(u(f))).join("")}</tr>`)),i=B(()=>t.map(f=>o.map(u=>u(f)?.toLowerCase()??"").join(`
`))),c=B(()=>{let f=Me().toLowerCase();return f?s().filter((u,d)=>i()[d].includes(f)):s()}),a,l;return ye(()=>{if(l){l.update(c());return}if(!a)return;let f=a.getElementsByTagName("tr")[0],u=a.getElementsByTagName("tbody")[0];!f||!u||(l=new Ft.default({scrollElem:a.getElementsByClassName("clusterize-scroll")[0],contentElem:u,rows:c(),callbacks:{clusterChanged(){let d=u?.querySelector("tr:not(.clusterize-extra-row)");if(!(!d||d.classList.contains("clusterize-no-data")))for(let h=0;h<f.cells.length;h++)f.cells[h].style.width=`${d.cells[h].offsetWidth}px`}}}))}),(()=>{let f=Gn.cloneNode(!0),u=f.firstChild,d=u.firstChild,h=d.firstChild,p=h.firstChild,m=u.nextSibling,x=a;typeof x=="function"?x(f):a=f;let w=r;return typeof w=="function"?w(u):r=u,O(p,C(G,{each:e,children:T=>(()=>{let y=Un.cloneNode(!0);return O(y,T),y})()})),m.addEventListener("scroll",T=>r&&(r.scrollLeft=T.currentTarget.scrollLeft)),f})()};var Ht=[[0,0,0],[0,100,50],[60,100,50],[120,100,50],[180,100,50],[240,100,50],[300,100,50],[0,0,100],[0,0,25.5],[0,0,50.2],[0,100,50],[0,100,83.3],[0,100,37.1],[0,32.3,61.8],[0,100,25.3],[0,20,42.2],[0,100,20.4],[0,20.2,33.9],[0,100,15.5],[0,19.7,25.9],[14.8,100,50],[14.8,100,83.3],[14.6,100,37.1],[14.3,32.3,61.8],[14.4,100,25.3],[14,20,42.2],[14.4,100,20.4],[15.4,20.2,33.9],[14.4,100,15.5],[13.8,19.7,25.9],[29.9,100,50],[29.6,100,83.3],[29.8,100,37.1],[29.5,32.3,61.8],[29.8,100,25.3],[29.3,20,42.2],[30,100,20.4],[29.1,20.2,33.9],[29.6,100,15.5],[30,19.7,25.9],[44.9,100,50],[45.2,100,83.3],[44.8,100,37.1],[44.8,32.3,61.8],[44.7,100,25.3],[44.7,20,42.2],[45,100,20.4],[44.6,20.2,33.9],[44.8,100,15.5],[46.2,19.7,25.9],[60,100,50],[60,100,83.3],[60,100,37.1],[60,32.3,61.8],[60,100,25.3],[60,20,42.2],[60,100,20.4],[60,20.2,33.9],[60,100,15.5],[60,19.7,25.9],[75.1,100,50],[74.8,100,83.3],[75.2,100,37.1],[75.2,32.3,61.8],[75.3,100,25.3],[75.3,20,42.2],[75,100,20.4],[75.4,20.2,33.9],[75.2,100,15.5],[73.8,19.7,25.9],[90.1,100,50],[90.4,100,83.3],[90.2,100,37.1],[90.5,32.3,61.8],[90.2,100,25.3],[90.7,20,42.2],[90,100,20.4],[90.9,20.2,33.9],[90.4,100,15.5],[90,19.7,25.9],[105.2,100,50],[105.2,100,83.3],[105.4,100,37.1],[105.7,32.3,61.8],[105.6,100,25.3],[106,20,42.2],[105.6,100,20.4],[104.6,20.2,33.9],[105.6,100,15.5],[106.2,19.7,25.9],[120,100,50],[120,100,83.3],[120,100,37.1],[120,32.3,61.8],[120,100,25.3],[120,20,42.2],[120,100,20.4],[120,20.2,33.9],[120,100,15.5],[120,19.7,25.9],[134.8,100,50],[134.8,100,83.3],[134.6,100,37.1],[134.3,32.3,61.8],[134.4,100,25.3],[134,20,42.2],[134.4,100,20.4],[135.4,20.2,33.9],[134.4,100,15.5],[133.8,19.7,25.9],[149.9,100,50],[149.6,100,83.3],[149.8,100,37.1],[149.5,32.3,61.8],[149.8,100,25.3],[149.3,20,42.2],[150,100,20.4],[149.1,20.2,33.9],[149.6,100,15.5],[150,19.7,25.9],[164.9,100,50],[165.2,100,83.3],[164.8,100,37.1],[164.8,32.3,61.8],[164.7,100,25.3],[164.7,20,42.2],[165,100,20.4],[164.6,20.2,33.9],[164.8,100,15.5],[166.2,19.7,25.9],[180,100,50],[180,100,83.3],[180,100,37.1],[180,32.3,61.8],[180,100,25.3],[180,20,42.2],[180,100,20.4],[180,20.2,33.9],[180,100,15.5],[180,19.7,25.9],[195.1,100,50],[194.8,100,83.3],[195.2,100,37.1],[195.2,32.3,61.8],[195.3,100,25.3],[195.3,20,42.2],[195,100,20.4],[195.4,20.2,33.9],[195.2,100,15.5],[193.8,19.7,25.9],[210.1,100,50],[210.4,100,83.3],[210.2,100,37.1],[210.5,32.3,61.8],[210.2,100,25.3],[210.7,20,42.2],[210,100,20.4],[210.9,20.2,33.9],[210.4,100,15.5],[210,19.7,25.9],[225.2,100,50],[225.2,100,83.3],[225.4,100,37.1],[225.7,32.3,61.8],[225.6,100,25.3],[226,20,42.2],[225.6,100,20.4],[224.6,20.2,33.9],[225.6,100,15.5],[226.2,19.7,25.9],[240,100,50],[240,100,83.3],[240,100,37.1],[240,32.3,61.8],[240,100,25.3],[240,20,42.2],[240,100,20.4],[240,20.2,33.9],[240,100,15.5],[240,19.7,25.9],[254.8,100,50],[254.8,100,83.3],[254.6,100,37.1],[254.3,32.3,61.8],[254.4,100,25.3],[254,20,42.2],[254.4,100,20.4],[255.4,20.2,33.9],[254.4,100,15.5],[253.8,19.7,25.9],[269.9,100,50],[269.6,100,83.3],[269.8,100,37.1],[269.5,32.3,61.8],[269.8,100,25.3],[269.3,20,42.2],[270,100,20.4],[269.1,20.2,33.9],[269.6,100,15.5],[270,19.7,25.9],[284.9,100,50],[285.2,100,83.3],[284.8,100,37.1],[284.8,32.3,61.8],[284.7,100,25.3],[284.7,20,42.2],[285,100,20.4],[284.6,20.2,33.9],[284.8,100,15.5],[286.2,19.7,25.9],[300,100,50],[300,100,83.3],[300,100,37.1],[300,32.3,61.8],[300,100,25.3],[300,20,42.2],[300,100,20.4],[300,20.2,33.9],[300,100,15.5],[300,19.7,25.9],[315.1,100,50],[314.8,100,83.3],[315.2,100,37.1],[315.2,32.3,61.8],[315.3,100,25.3],[315.3,20,42.2],[315,100,20.4],[315.4,20.2,33.9],[315.2,100,15.5],[313.8,19.7,25.9],[330.1,100,50],[330.4,100,83.3],[330.2,100,37.1],[330.5,32.3,61.8],[330.2,100,25.3],[330.7,20,42.2],[330,100,20.4],[330.9,20.2,33.9],[330.4,100,15.5],[330,19.7,25.9],[345.2,100,50],[345.2,100,83.3],[345.4,100,37.1],[345.7,32.3,61.8],[345.6,100,25.3],[346,20,42.2],[345.6,100,20.4],[344.6,20.2,33.9],[345.6,100,15.5],[346.2,19.7,25.9],[0,0,20],[0,0,31.4],[0,0,41.2],[0,0,51],[0,0,74.5],[0,0,100]];var Vt=["#000000","#ff0000","#ffff00","#00ff00","#00ffff","#0000ff","#ff00ff","#ffffff","#414141","#808080","#ff0000","#ffaaaa","#bd0000","#bd7e7e","#810000","#815656","#680000","#684545","#4f0000","#4f3535","#ff3f00","#ffbfaa","#bd2e00","#bd8d7e","#811f00","#816056","#681900","#684e45","#4f1300","#4f3b35","#ff7f00","#ffd4aa","#bd5e00","#bd9d7e","#814000","#816b56","#683400","#685645","#4f2700","#4f4235","#ffbf00","#ffeaaa","#bd8d00","#bdad7e","#816000","#817656","#684e00","#685f45","#4f3b00","#4f4935","#ffff00","#ffffaa","#bdbd00","#bdbd7e","#818100","#818156","#686800","#686845","#4f4f00","#4f4f35","#bfff00","#eaffaa","#8dbd00","#adbd7e","#608100","#768156","#4e6800","#5f6845","#3b4f00","#494f35","#7fff00","#d4ffaa","#5ebd00","#9dbd7e","#408100","#6b8156","#346800","#566845","#274f00","#424f35","#3fff00","#bfffaa","#2ebd00","#8dbd7e","#1f8100","#608156","#196800","#4e6845","#134f00","#3b4f35","#00ff00","#aaffaa","#00bd00","#7ebd7e","#008100","#568156","#006800","#456845","#004f00","#354f35","#00ff3f","#aaffbf","#00bd2e","#7ebd8d","#00811f","#568160","#006819","#45684e","#004f13","#354f3b","#00ff7f","#aaffd4","#00bd5e","#7ebd9d","#008140","#56816b","#006834","#456856","#004f27","#354f42","#00ffbf","#aaffea","#00bd8d","#7ebdad","#008160","#568176","#00684e","#45685f","#004f3b","#354f49","#00ffff","#aaffff","#00bdbd","#7ebdbd","#008181","#568181","#006868","#456868","#004f4f","#354f4f","#00bfff","#aaeaff","#008dbd","#7eadbd","#006081","#567681","#004e68","#455f68","#003b4f","#35494f","#007fff","#aad4ff","#005ebd","#7e9dbd","#004081","#566b81","#003468","#455668","#00274f","#35424f","#003fff","#aabfff","#002ebd","#7e8dbd","#001f81","#566081","#001968","#454e68","#00134f","#353b4f","#0000ff","#aaaaff","#0000bd","#7e7ebd","#000081","#565681","#000068","#454568","#00004f","#35354f","#3f00ff","#bfaaff","#2e00bd","#8d7ebd","#1f0081","#605681","#190068","#4e4568","#13004f","#3b354f","#7f00ff","#d4aaff","#5e00bd","#9d7ebd","#400081","#6b5681","#340068","#564568","#27004f","#42354f","#bf00ff","#eaaaff","#8d00bd","#ad7ebd","#600081","#765681","#4e0068","#5f4568","#3b004f","#49354f","#ff00ff","#ffaaff","#bd00bd","#bd7ebd","#810081","#815681","#680068","#684568","#4f004f","#4f354f","#ff00bf","#ffaaea","#bd008d","#bd7ead","#810060","#815676","#68004e","#68455f","#4f003b","#4f3549","#ff007f","#ffaad4","#bd005e","#bd7e9d","#810040","#81566b","#680034","#684556","#4f0027","#4f3542","#ff003f","#ffaabf","#bd002e","#bd7e8d","#81001f","#815660","#680019","#68454e","#4f0013","#4f353b","#333333","#505050","#696969","#828282","#bebebe","#ffffff"];var Yn={d:"\xB0",c:"\u2300",p:"\xB1"},me=(e,t)=>{e=e.replace(/%%(.)/g,(a,l)=>Yn[l]||l);let n=t?.encoding,r,o=n instanceof TextDecoder?n:void 0,s="",i=[],c=a=>{s&&(i.push(s),s=""),i.push(a)};for(let a=0;a<e.length;a++)switch(r=e[a]){default:s+=r;break;case"\\":switch(r=e[++a]){default:s+=r;break;case"P":s+=`
`;break;case"f":case"F":{let d="";for(;r=e[++a];){if(r===";"){c({f:d});break}if(r==="|"){let h={f:d},p=e.indexOf(";",++a);for(let m of e.slice(a,p).split("|"))h[m[0]]=+m.slice(1);a=p,c(h);break}d+=r==="\\"?e[++a]:r}break}case"S":{let d,h="",p="";for(;r=e[++a];){if(r===";"){d&&c({S:[h,d,p]});break}r==="\\"?d?p+=e[++a]:h+=e[++a]:d?p+=r:r==="^"||r==="/"||r==="#"?d=r:h+=r}break}case"H":case"W":let l=++a,[,f,u]=e.slice(l,a=e.indexOf(";",a)).match(/^(\d*(?:\.\d+)?)(\D*)$/);c({[r]:[+f,u]});break;case"Q":case"A":case"C":case"T":{let d=++a;c({[r]:+e.slice(d,a=e.indexOf(";",a))});break}case"L":case"O":case"K":c({[r]:1});break;case"l":case"o":case"k":c({[r.toUpperCase()]:0});break;case"U":case"u":e[a+1]==="+"?(s+=String.fromCodePoint(parseInt(e.substr(a+2,4),16)),a+=5):s+=r;break;case"M":case"m":n?e[a+1]==="+"&&e[a+2]==="1"?(s+=(o=o||new TextDecoder(n)).decode(new Uint8Array([parseInt(e.substr(a+3,2),16),parseInt(e.substr(a+5,2),16)])),a+=6):s+=r:s+="\\"+r}break;case"{":{let l=1,f=a;for(;r=e[++a];)if(r==="{")l++;else if(r==="}"){if(--l==0){c(me(e.slice(f+1,a)));break}}else r==="\\"&&a++;break}}return s&&i.push(s),i};var Wn={d:"\xB0",c:"\u2300",p:"\xB1"},Kn=(e,t)=>(e=qn(e),t?Jn(e,t):e),qn=e=>e.replace(/\\[uU]\+([0-9a-fA-F]{4})/g,(t,n)=>String.fromCodePoint(parseInt(n,16))),Jn=(e,t)=>{let n=t instanceof TextDecoder?t:void 0;return e.replace(/\\[mM]\+1([0-9a-fA-F]{2})([0-9a-fA-F]{2})/g,(r,o,s)=>(n=n||new TextDecoder(t)).decode(new Uint8Array([parseInt(o,16),parseInt(s,16)])))},zt=(e,t)=>{e=Kn(e,t?.encoding);let n=0,r={text:""},o=[r];for(let s of e.matchAll(/%%(\d\d\d|.)/g)){r.text+=e.slice(n,s.index);let i=s[1].toLowerCase(),c=Wn[i];c?r.text+=c:i.length===3?r.text+=String.fromCodePoint(+i):i==="k"||i==="o"||i==="u"?(r={...r,text:""},r[i]?delete r[i]:r[i]=1,o.push(r)):r.text+=i,n=s.index+s[0].length}return r.text+=e.slice(n),o.filter(s=>s.text)};var se=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),Qn=1/64,Gt=(e,t)=>Math.abs(e-t)<Qn,re=(()=>{let e=(t,n)=>{let[r,o]=String(t).split("e");return+(r+"e"+(o?+o+n:n))};return(t,n)=>e(Math.round(e(t,n)),-n)})(),Zn=e=>e&&e.trim(),z=(e,t)=>Zn(E(e,t)),I=(e,t,n)=>{let r=+E(e,t);if(isNaN(r))return n===void 0?NaN:n;if(Math.abs(r)>1e6)throw Error(`group code ${t} is invalid (${r})`);let o=Math.round(r);return Math.abs(o-r)<1e-8?o:r},qe=(e,t)=>e||t?`translate(${e||0},${t||0})`:"",J=(e,t,n)=>!e||Math.abs(e)<.01?"":t||n?`rotate(${e},${t||0},${n||0})`:`rotate(${e})`,Ut=(...e)=>e.filter(Boolean).join(" "),Xt=e=>{let t=e.map(Math.abs);return e[0]<0&&t.unshift(0),t.length%2==1&&t.push(0),t},Yt=class{constructor(t,n){Ne(this,"layerMap",new Map);Ne(this,"ltypeMap",new Map);this.dxf=t,this.resolveColorIndex=n.resolveColorIndex,this.resolveLineWeight=n.resolveLineWeight,this.$LUPREC=+E(t.HEADER?.$LUPREC,70)||4;for(let r of t.TABLES?.LAYER??[]){if(E(r,0)!=="LAYER")continue;let o=I(r,370);this.layerMap.set(E(r,2),{color:n.resolveColorIndex(+E(r,62)),ltype:E(r,6),strokeWidth:isNaN(o)?void 0:o})}for(let r of t.TABLES?.LTYPE??[]){if(E(r,0)==="LTYPE")continue;let o=Xt(j(r,49).map(s=>re(s,8)));o.length!==0&&this.ltypeMap.set(E(r,2),{strokeDasharray:o.join(" ")})}}layer(t){let n=z(t,8);return n?this.layerMap.get(n):void 0}ltype(t){let n=z(t,8)??this.layer(t)?.ltype;return n?this.ltypeMap.get(n):void 0}_color(t){let n=z(t,62);if(n==="0")return"currentColor";if(n&&n!=="256")return this.resolveColorIndex(+n);let r=this.layer(t);if(r)return r.color}color(t){return this._color(t)||"currentColor"}strokeWidth(t){let n=z(t,370);switch(n){case"-3":return this.resolveLineWeight(-3);case"-2":return this.resolveLineWeight(this.layer(t)?.strokeWidth??-3);case"-1":return;default:return this.resolveLineWeight(+n/100)}}strokeDasharray(t){return this.ltype(t)?.strokeDasharray}roundCoordinate(t){return t===void 0?NaN:re(t,this.$LUPREC)}},er={DIMSCALE:[40,40,1],DIMTP:[47,40,NaN],DIMTM:[48,40,NaN],DIMTOL:[71,70,0],DIMTXT:[140,40,1],DIMLFAC:[144,40,1],DIMCLRT:[178,70,NaN],DIMDEC:[271,70,4]},tr=e=>{let t=new Map;for(let n=0;n<e.length;n++)if(e[n][0]===1e3&&e[n][1].trim()==="DSTYLE"&&e[n+1][0]===1002&&e[n+1][1].trim()==="{"){for(let r=n+2;r<e.length&&e[r][0]!==1002;r++)e[r][0]===1070&&t.set(+e[r][1],e[++r][1]);return t}},nr=(e,t)=>{let n=E(t,3),r=e.TABLES?.DIMSTYLE?.find(i=>E(i,2)===n),o=tr(t),s=Object.create(null);for(let[i,[c,a,l]]of Object.entries(er)){let f=o?.get(c)??E(r,c)??E(e.HEADER?.["$"+i],a);s[i]=f!==void 0?+f:l}return s},Wt=e=>e>0?"+"+e:e<0?String(e):" 0",rr=(e,t,n)=>{let r=I(t,42,-1),o=re(r!==-1?r:e*n.DIMLFAC,n.DIMDEC),s=String(o);if(n.DIMTOL){let c=n.DIMTP,a=n.DIMTM;(c||a)&&(c===a?s=`${o}  \xB1${c}`:s=`${o}  {\\S${Wt(c)}^${Wt(-a)};}`)}let i=E(t,1);return i?i.replace(/<>/,s):s},v=(e,t)=>{let n="<"+e,r;for(let[o,s]of Object.entries(t))!s&&s!==0||(o==="children"?r=s:n+=` ${o}="${typeof s=="string"?se(s):s}"`);return(e==="line"||e==="polyline"||e==="polygon"||e==="circle"||e==="ellipse"||e==="path")&&(t.fill||(n+=' fill="none"'),n+=' vector-effect="non-scaling-stroke"'),e==="text"&&(n+=' stroke="none" style="white-space:pre"'),r?n+=`>${Array.isArray(r)?r.flat(1/0).join(""):r}</${e}>`:n+="/>",n},Q=v,ge=e=>re(e,6),or=(e,t)=>{let n=e.findIndex(s=>s[0]===91);if(n===-1)return[];let r=[],o;for(let s=n+1;e[s]&&e[s][0]!==98;s++){let i=e[s][0];switch(i){case 92:r.push(o={10:[],20:[]});break;case 10:case 20:o?.[i].push(t.roundCoordinate(e[s][1]));break}}return r},sr=e=>{let t=e.findIndex(o=>o[0]===78);if(t===-1)return[];let n=[],r;for(let o=t+1;e[o];o++){let s=e[o][0],i=ge(e[o][1]);switch(s){case 53:n.push(r={53:i,43:0,44:0,45:0,46:0,49:[]});break;case 43:case 44:case 45:case 46:r&&(r[s]=i);break;case 49:r?.[49].push(i);break;case 79:break;default:return n}}return n},xe={LINEAR:(e,t,n)=>{let r=ge(I(n,460)*180/Math.PI);return Q("linearGradient",{id:e,x2:"1",y2:"0",gradientTransform:J(-r,.5,.5),children:[v("stop",{"stop-color":t[0]}),v("stop",{"stop-color":t[1],offset:"1"})]})},CYLINDER:(e,t,n)=>{let r=ge(I(n,460)*180/Math.PI);return Q("linearGradient",{id:e,x2:"1",y2:"0",gradientTransform:J(-r,.5,.5),children:[v("stop",{"stop-color":t[0]}),v("stop",{"stop-color":t[1],offset:".5"}),v("stop",{"stop-color":t[0],offset:"1"})]})},INVCYLINDER:(e,t,n,r)=>xe.CYLINDER(e,[t[1],t[0]],n,r),SPHERICAL:(e,t,n,r)=>{let o=r.flatMap(({10:f})=>f),s=r.flatMap(({20:f})=>f),i=Math.min(...o),c=Math.max(...o),a=Math.min(...s),l=Math.max(...s);return Q("radialGradient",{id:e,cx:(i+c)/2,cy:-(a+l)/2,r:Math.max(c-i,l-a)/2,gradientUnits:"userSpaceOnUse",children:[v("stop",{"stop-color":t[1]}),v("stop",{"stop-color":t[0],offset:"1"})]})},INVSPHERICAL:(e,t,n,r)=>xe.SPHERICAL(e,[t[1],t[0]],n,r),HEMISPHERICAL:(e,t)=>Q("radialGradient",{id:e,cy:"1",gradientTransform:"translate(-.75,-1.5) scale(2.5)",children:[v("stop",{"stop-color":t[1]}),v("stop",{"stop-color":t[0],offset:"1"})]}),INVHEMISPHERICAL:(e,t,n,r)=>xe.HEMISPHERICAL(e,[t[1],t[0]],n,r),CURVED:(e,t)=>Q("radialGradient",{id:e,cy:"1",gradientTransform:"translate(-1,-2) scale(3)",children:[v("stop",{"stop-color":t[1]}),v("stop",{"stop-color":t[0],offset:"1"})]}),INVCURVED:(e,t,n,r)=>xe.CURVED(e,[t[1],t[0]],n,r)},lr=(e,t,n)=>{let r=n.color(e);if(z(e,450)==="1"){let o=`hatch-gradient-${E(e,5)}`,s=j(e,63),i=[n.resolveColorIndex(+s[0]||5),n.resolveColorIndex(+s[1]||2)],c=z(e,470),a=c&&xe[c]?.(o,i,e,t);return a?[`url(#${o})`,`<defs>${a}</defs>`]:[r,""]}else{if(z(e,70)==="1")return[r,""];{let o=sr(e);if(o.length===0)return[r,""];let s=E(e,5),i=`hatch-pattern-${s}`,c=e.findIndex(([f,u])=>f===1001&&u==="HATCHBACKGROUNDCOLOR"),a=c!==-1&&+e[c+1][1]&255,l=a&&n.resolveColorIndex(a);return[`url(#${i})`,Q("defs",{children:[o.map(({53:f,43:u,44:d,45:h,46:p,49:m},x)=>{m=Xt(m);let w=ge(Math.hypot(h,p)),T=ge(m.reduce((b,g)=>b+g,0))||256,y=Ut(qe(u,-d),J(-f));return v("pattern",{id:`${i}-${x}`,width:T,height:w,patternUnits:"userSpaceOnUse",patternTransform:y,children:v("line",{x2:T,"stroke-width":"1",stroke:r,"stroke-dasharray":m.join(" ")})})}),Q("pattern",{id:i,width:256,height:256,patternUnits:"userSpaceOnUse",children:[l?v("rect",{fill:l,width:256,height:256}):"",o.map((f,u)=>v("rect",{fill:`url(#hatch-pattern-${s}-${u})`,width:256,height:256}))]})]})]}}},ir=e=>{e=+e;let t,n;switch(e){case 1:case 2:case 3:t="text-before-edge";break;case 4:case 5:case 6:t="central";break;case 7:case 8:case 9:t="text-after-edge";break}switch(e%3){case 2:n="middle";break;case 0:n="end";break}return{dominantBaseline:t,textAnchor:n}},Kt=(e,t)=>re(Math.atan2(e||0,t||0)*180/Math.PI,5)||0,cr=e=>{for(let t=e.length-1;t>=0;t--)switch(e[t][0]){case 50:return re(e[t][1],5)||0;case 11:return Kt(I(e,12),+e[t][1]);case 21:return Kt(+e[t][1],I(e,11))}return 0},be=(e,t,n=0)=>{if(e.length<=n)return"";let r=be(e,t,n+1),o=e[n];if(typeof o=="string")return se(o)+r;if(Array.isArray(o))return be(o,t)+r;if(o.S)return Q("tspan",{children:[v("tspan",{dy:"-.5em",children:se(o.S[0])}),v("tspan",{dy:"1em",dx:o.S[0].length/-2+"em",children:se(o.S[2])})]})+r;if(o.f){let s={family:o.f,weight:o.b?700:400,style:o.i?"italic":void 0},i=t?.resolveFont?.(s)??s;return v("tspan",{"font-family":i.family,"font-weight":i.weight,"font-style":i.style,"font-size":i.scale&&i.scale!==1?i.scale+"em":void 0,children:r})}return o.Q?v("tspan",{"font-style":`oblique ${o.Q}deg`,children:r}):r},qt={warn:console.debug,resolveColorIndex:e=>Vt[e]??"#888",resolveLineWeight:e=>e===-3?.5:re(e*10,6)},Z=e=>({"data-5":z(e,5)}),Je=([e,t,n])=>{let r=Math.hypot(e,t,n);return[e/r,t/r,n/r]},Jt=([e,t,n],[r,o,s])=>[t*s-n*o,n*r-e*s,e*o-t*r],Qt=e=>{let t=-I(e,210,0),n=I(e,220,0),r=I(e,230,1);if(Math.abs(t)<1/64&&Math.abs(n)<1/64)return r<0?"transform:rotateY(180deg)":void 0;let o=Je([t,n,r]),s=Je(Jt([0,0,1],o)),i=Je(Jt(o,s));return`transform:matrix3d(${s},0,${i},0,0,0,0,0,0,0,0,1)`},Zt=({k:e,o:t,u:n})=>{let r=[];return e&&r.push("line-through"),t&&r.push("overline"),n&&r.push("underline"),r.join(" ")},ar=[,"text-after-edge","central","text-before-edge"],fr=[,"middle","end",,"middle"],Qe=(e,t)=>{let n="";for(let r=0;r<e.length;r++)n+=`${e[r]},${t[r]} `;return n.slice(0,-1)},ur=(e,t)=>{let{warn:n,resolveColorIndex:r}=t,o=new Yt(e,t),s=l=>o.roundCoordinate(l),i=(l,f)=>s(E(l,f)),c=l=>Object.assign(Z(l),{stroke:o.color(l),"stroke-width":o.strokeWidth(l),"stroke-dasharray":o.strokeDasharray(l),style:Qt(l)}),a={POINT:()=>{},LINE:l=>{let f=i(l,10),u=i(l,11),d=-i(l,20),h=-i(l,21);return[v("line",{...c(l),x1:f,y1:d,x2:u,y2:h}),[f,u],[d,h]]},POLYLINE:(l,f)=>{let u=f.map(m=>i(m,10)),d=f.map(m=>-i(m,20)),h=+(E(l,70)??0),p=Object.assign(c(l),{points:Qe(u,d)});return[h&1?v("polygon",{...p}):v("polyline",{...p}),u,d]},LWPOLYLINE:l=>{let f=j(l,10).map(p=>s(p)),u=j(l,20).map(p=>-s(p)),d=+(E(l,70)??0),h=Object.assign(c(l),{points:Qe(f,u)});return[d&1?v("polygon",{...h}):v("polyline",{...h}),f,u]},CIRCLE:l=>{let f=i(l,10),u=-i(l,20),d=i(l,40);return[v("circle",{...c(l),cx:f,cy:u,r:d}),[f-d,f+d],[u-d,u+d]]},ARC:l=>{let f=i(l,10),u=i(l,20),d=i(l,40),h=I(l,50,0),p=I(l,51,0),m=h*Math.PI/180,x=p*Math.PI/180,w=s(f+d*Math.cos(m)),T=s(u+d*Math.sin(m)),y=s(f+d*Math.cos(x)),b=s(u+d*Math.sin(x)),g=(p-h+360)%360<=180?"0":"1";return[v("path",{...c(l),d:`M${w} ${-T}A${d} ${d} 0 ${g} 0 ${y} ${-b}`}),[w,y],[-T,-b]]},ELLIPSE:l=>{let f=I(l,41,0),u=I(l,42,2*Math.PI);if(Gt(f,0)&&Gt(u,2*Math.PI)){let d=i(l,10),h=-i(l,20),p=i(l,11),m=i(l,21),x=Math.hypot(p,m),w=I(l,40)*x,T=-Math.atan2(m,p),y=J(T*180/Math.PI,d,h);return[v("ellipse",{...c(l),cx:d,cy:h,rx:x,ry:w,transform:y}),[d-x,d+x],[h-w,h+w]]}else n("Elliptical arc cannot be rendered yet.")},LEADER:l=>{let f=j(l,10).map(d=>s(d)),u=j(l,20).map(d=>-s(d));return[v("polyline",{...Z(l),points:Qe(f,u),stroke:o.color(l),"stroke-dasharray":o.strokeDasharray(l)}),f,u]},HATCH:l=>{let f=or(l,o),u="";for(let{10:p,20:m}of f){u+=`M${p[0]} ${-m[0]}`;for(let x=1;x<p.length;x++)u+=`L${p[x]} ${-m[x]}`}u+="Z";let[d,h]=lr(l,f,o);return[h+v("path",{...Z(l),d:u,fill:d}),f.flatMap(p=>p[10]),f.flatMap(p=>-p[20])]},SOLID:l=>{let f=i(l,10),u=i(l,11),d=i(l,12),h=i(l,13),p=-i(l,20),m=-i(l,21),x=-i(l,22),w=-i(l,23),T=`M${f} ${p}L${u} ${m}L${d} ${x}${d!==h||x!==w?`L${h} ${w}`:""}Z`;return[v("path",{...Z(l),d:T,fill:o.color(l)}),[f,u,d,h],[p,m,x,w]]},TEXT:l=>{let f=i(l,10),u=-i(l,20),d=i(l,40),h=-I(l,50),p=zt(E(l,1)||"",t);return[v("text",{...Z(l),x:f,y:u,fill:o.color(l),"font-size":d,"dominant-baseline":ar[z(l,73)],"text-anchor":fr[z(l,72)],transform:J(h,f,u),"text-decoration":p.length===1&&Zt(p[0]),children:p.length===1?se(p[0].text):p.map(m=>v("tspan",{"text-decoration":Zt(m),children:se(m.text)}))}),[f,f+d*p.length],[u,u+d]]},MTEXT:l=>{let f=i(l,10),u=-i(l,20),d=i(l,40),h=cr(l),{dominantBaseline:p,textAnchor:m}=ir(z(l,71)),x=j(l,3).join("")+(E(l,1)??"");return[v("text",{...Z(l),x:f,y:u,fill:o.color(l),"font-size":d,"dominant-baseline":p,"text-anchor":m,transform:J(-h,f,u),children:be(me(x,t),t)}),[f,f+d*x.length],[u,u+d]]},DIMENSION:l=>{let f=nr(e,l),u="",d,h="text-after-edge",p="middle",m,x=i(l,11),w=-i(l,21),T=i(l,10),y=-i(l,20),b=[x],g=[w],$=I(l,70,0);switch($&7){case 0:case 1:{let _=i(l,13),L=i(l,14),k=-i(l,23),R=-i(l,24);m=Math.round(-I(l,50,0)||0),m%180==0?(d=Math.abs(_-L),u=v("path",{stroke:"currentColor",d:`M${_} ${k}L${_} ${y}L${L} ${y}L${L} ${R}`}),m=0):(d=Math.abs(k-R),u=v("path",{stroke:"currentColor",d:`M${_} ${k}L${T} ${k}L${T} ${R}L${L} ${R}`})),b.push(_,L),g.push(k,R);break}case 2:case 5:n("Angular dimension cannot be rendered yet.",l);return;case 3:case 4:{let _=i(l,15),L=-i(l,25);d=Math.hypot(T-_,y-L),u=v("path",{stroke:"currentColor",d:`M${_} ${L}L${x} ${w}`}),b.push(T,_),g.push(y,L);break}case 6:{let _=i(l,13),L=i(l,14),k=-i(l,23),R=-i(l,24);$&64?(d=Math.abs(T-+_),u=v("path",{stroke:"currentColor",d:`M${_} ${k}L${_} ${R}L${L} ${R}L${x} ${w}`}),m=-90):(d=Math.abs(y-+k),u=v("path",{stroke:"currentColor",d:`M${_} ${k}L${L} ${k}L${L} ${R}L${x} ${w}`})),h="central",p="middle",b.push(_,L),g.push(k,R);break}default:n("Unknown dimension type.",l);return}let M;{let _=rr(d,l,f),L=f.DIMTXT*f.DIMSCALE,k=f.DIMCLRT;M=v("text",{x,y:w,fill:isNaN(k)?o.color(l):k===0?"currentColor":r(k),"font-size":L,"dominant-baseline":h,"text-anchor":p,transform:J(m,x,w),children:be(me(_,t),t)})}return[v("g",{...Z(l),color:o.color(l),"stroke-width":o.strokeWidth(l),"stroke-dasharray":o.strokeDasharray(l),style:Qt(l),children:u+M}),b,g]},ACAD_TABLE:l=>{let f=[];{let b=l.findIndex(g=>g[0]===171);for(let g=b+1;g<l.length;g++)l[g][0]===171&&(f.push(l.slice(b,g)),b=g);f.push(l.slice(b,l.length))}let u=j(l,141).map(b=>+b).reduce((b,g)=>(b.push(b[b.length-1]+g),b),[0]),d=j(l,142).map(b=>+b).reduce((b,g)=>(b.push(b[b.length-1]+g),b),[0]),h=o.color(l),p=r(+E(l,64)),m=u.map(b=>v("line",{stroke:h,x1:"0",y1:b,x2:d[d.length-1],y2:b})).join(""),x=0,w=0;for(let b of f){let g=d[x],$=u[w],M=+E(b,64);+E(b,173)||(m+=v("line",{x1:g,y1:$,x2:g,y2:u[w+1],stroke:h})),z(b,171)==="2"?n('Table cell type "block" cannot be rendered yet.',l,b):m+=v("text",{x:g,y:$,fill:isNaN(M)?p:r(M),children:be(me(E(b,1)??""),t)}),++x==d.length-1&&(x=0,w++)}m+=v("line",{x1:d[d.length-1],y1:"0",x2:d[d.length-1],y2:u[u.length-1],stroke:h});let T=i(l,10),y=-i(l,20);return[v("g",{...Z(l),"font-size":z(l,140),"dominant-baseline":"text-before-edge",transform:qe(T,y),children:m}),d.map(b=>b+T),u.map(b=>b+y)]},INSERT:l=>{let f=i(l,10),u=-i(l,20),d=-I(l,50),h=I(l,41,1)||1,p=I(l,42,1)||1,m=Ut(qe(f,u),h!==1||p!==1?`scale(${h},${p})`:"",J(d)),x=e.BLOCKS?.[E(l,2)],w=x?.slice(E(x[0],0)==="BLOCK"?1:0,E(x[x.length-1],0)==="ENDBLK"?-1:void 0),[T,y]=en(w,a,t);return[v("g",{...c(l),color:o._color(l),"stroke-width":o.strokeWidth(l),"stroke-dasharray":o.strokeDasharray(l),transform:m,children:T}),[f+y.x*h,f+(y.x+y.w)*h],[u+y.y*p,u+(y.y+y.h)*p]]}};return a},en=(e,t,n)=>{let{warn:r}=n,o="",s=1/0,i=-1/0,c=1/0,a=-1/0;if(e)for(let l=0;l<e.length;l++){let f=e[l],u=E(f,0);if(!u)continue;let d=[];for(;E(e[l+1],0)==="VERTEX";)d.push(e[++l]);d.length!==0&&E(e[l+1],0)==="SEQEND"&&l++;try{let h=t[u];if(h){let p=h(f,d);if(p){o+=p[0];let m=p[1].filter(w=>isFinite(w)),x=p[2].filter(w=>isFinite(w));s=Math.min(s,...m),i=Math.max(i,...m),c=Math.min(c,...x),a=Math.max(a,...x)}}else r(`Unknown entity type: ${u}`,f)}catch(h){r(`Error occurred: ${h}`,f)}}return[o,{x:s,y:c,w:i-s,h:a-c}]},dr=(e,t)=>{let n=t?{...qt,...t}:qt;return en(e.ENTITIES,ur(e,n),n)},tn=(e,t)=>{let[n,{x:r,y:o,w:s,h:i}]=dr(e,t);return v("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`${r} ${o} ${s} ${i}`,width:s,height:i,children:n})};var hr=[SVGCircleElement,SVGEllipseElement,SVGImageElement,SVGLineElement,SVGPathElement,SVGPolygonElement,SVGPolylineElement,SVGRectElement,SVGTextElement,SVGUseElement],Ze=function(e,t,n,r){for(var o=n.firstElementChild;o;o=o.nextElementSibling){if(o instanceof SVGGElement){Ze(e,t,o,r);continue}for(var s=0,i=hr;s<i.length;s++){var c=i[s];o instanceof c&&r(o)&&e.push(o)}}return e},Y=function(e,t,n){return t<=e&&e<=n},pr=function(e,t){var n=e.x,r=n+e.width,o=e.y,s=o+e.height;return Y(t.x,n,r)&&Y(t.x+t.width,n,r)&&Y(t.y,o,s)&&Y(t.y+t.height,o,s)},mr=function(e,t){var n=e.x,r=n+e.width,o=e.y,s=o+e.height;return(Y(t.x,n,r)||Y(t.x+t.width,n,r)||Y(n,t.x,t.x+t.width))&&(Y(t.y,o,s)||Y(t.y+t.height,o,s)||Y(o,t.y,t.y+t.height))},nn=function(e,t,n,r){return e.getEnclosureList?Array.prototype.slice.call(e.getEnclosureList(r,t)):Ze([],e,t||e,function(o){return pr(n,o.getBBox())})},rn=function(e,t,n,r){return e.getIntersectionList?Array.prototype.slice.call(e.getIntersectionList(r,t)):Ze([],e,t||e,function(o){return mr(n,o.getBBox())})};var on=function(e,t){return e.filter(function(n){return t.indexOf(n)===-1})},sn=function(e,t,n,r,o){var s=e.createSVGRect();return s.x=Math.min(t,r),s.y=Math.min(n,o),s.width=Math.abs(t-r),s.height=Math.abs(n-o),s},Ae=function(e,t,n){if(!t)return n;var r=e.createSVGPoint();r.x=n.x,r.y=n.y;var o=r.matrixTransform(t);r.x+=n.width,r.y+=n.height;var s=r.matrixTransform(t);return sn(e,o.x,o.y,s.x,s.y)},ln=function(e){var t,n,r,o=[],s=e.svg,i=function(g){return sn(s,n-document.documentElement.scrollLeft-document.body.scrollLeft,r-document.documentElement.scrollTop-document.body.scrollTop,g.clientX,g.clientY)},c=document.body.appendChild(document.createElement("div")),a=c.style;c.className="svg-drag-select-area-overlay",a.position="fixed",a.pointerEvents="none",a.display="none";var l=function(g){var $=this;if((g.pointerId||0)===t){var M=i(g),_=Ae(this,this.getScreenCTM().inverse(),M),L=Ae(this,this.getCTM(),_),k=e.referenceElement||null,R=function(){return nn($,k,_,L)},et=function(){return rn($,k,_,L)},Oe=typeof e.selector=="function"?e.selector({svg:this,referenceElement:k,pointerEvent:g,dragAreaInClientCoordinate:M,dragAreaInSvgCoordinate:_,dragAreaInInitialSvgCoordinate:L,getEnclosures:R,getIntersections:et}):e.selector==="intersection"?et():R(),tt=on(Oe,o),nt=on(o,Oe);if(a.left=M.x+"px",a.top=M.y+"px",a.width=M.width+"px",a.height=M.height+"px",tt.length||nt.length){var hn=o;o=Oe,e.onSelectionChange&&e.onSelectionChange({svg:this,referenceElement:k,pointerEvent:g,dragAreaInClientCoordinate:M,dragAreaInSvgCoordinate:_,dragAreaInInitialSvgCoordinate:L,selectedElements:o,previousSelectedElements:hn,newlySelectedElements:tt,newlyDeselectedElements:nt})}}},f=function(g){if(g.isPrimary!==!1&&t===void 0){var $;e.onSelectionStart&&e.onSelectionStart({svg:this,referenceElement:e.referenceElement||null,pointerEvent:g,cancel:function(){return $=1}}),$||(t=g.pointerId||0,n=g.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,r=g.clientY+document.documentElement.scrollTop+document.body.scrollTop,o=[],l.call(this,g),a.display="",this.setPointerCapture&&this.setPointerCapture(t))}},u=function(g){if((g.pointerId||0)===t){this.releasePointerCapture&&this.releasePointerCapture(t),t=void 0,a.display="none";var $=i(g),M=Ae(this,this.getScreenCTM().inverse(),$),_=Ae(this,this.getCTM(),M);e.onSelectionEnd&&e.onSelectionEnd({svg:this,referenceElement:e.referenceElement||null,pointerEvent:g,dragAreaInClientCoordinate:$,dragAreaInSvgCoordinate:M,dragAreaInInitialSvgCoordinate:_,selectedElements:o})}},d=s.style.touchAction,h=getComputedStyle(s).touchAction,p;if("PointerEvent"in window){var m=s.getAttribute("draggable"),x=s.style.pointerEvents,w=h!=="none"&&h!=="pinch-zoom";w&&(s.style.touchAction="pinch-zoom"),s.style.pointerEvents="all",s.setAttribute("draggable","false"),s.addEventListener("pointerdown",f),s.addEventListener("pointermove",l),s.addEventListener("pointerup",u),s.addEventListener("pointercancel",u),p=function(){m===null?s.removeAttribute("draggable"):s.setAttribute("draggable",m),s.style.pointerEvents=x,w&&(s.style.touchAction=d),s.removeEventListener("pointerdown",f),s.removeEventListener("pointermove",l),s.removeEventListener("pointerup",u),s.removeEventListener("pointercancel",u),c.parentElement&&c.parentElement.removeChild(c)}}else if("ontouchend"in window){var T=h!=="manipulation";T&&(s.style.touchAction="manipulation");var y=function(g,$){var M={pointerId:$.identifier};return Object.keys(Object.getPrototypeOf($)).forEach(function(_){return M[_]=$[_]}),Object.keys(Object.getPrototypeOf(g)).forEach(function(_){return M[_]=g[_]}),M},b=function(g){if(t!==void 0)for(var $=0;$<g.changedTouches.length;$++)g.changedTouches[$].identifier===t&&u.call(this,y(g,g.changedTouches[0]))};s.addEventListener("touchstart",function(g){g.touches.length===1&&f.call(this,y(g,g.touches[0]))}),s.addEventListener("touchmove",function(g){g.touches.length===1&&(g.preventDefault(),l.call(this,y(g,g.touches[0])))}),s.addEventListener("touchend",b),s.addEventListener("touchcancel",b),p=function(){T&&(s.style.touchAction=d),s.removeEventListener("pointerdown",f),s.removeEventListener("pointermove",l),s.removeEventListener("pointerup",u),s.removeEventListener("pointercancel",u),c.parentElement&&c.parentElement.removeChild(c)}}else s.addEventListener("mousedown",f),s.addEventListener("mousemove",l),s.addEventListener("mouseup",u),p=function(){s.removeEventListener("mousedown",f),s.removeEventListener("mousemove",l),s.removeEventListener("mouseup",u),c.parentElement&&c.parentElement.removeChild(c)};return{cancel:p,dragAreaOverlay:c}};var gr=D('<div data-zoom-on-wheel="min-scale: 0.9; max-scale: 10000" data-pan-on-drag="" class="h-full bg-hex-123"></div>',2),xr=D('<a download="" class="absolute right-4 top-2 text-cyan-300">Download SVG File</a>',2),br=D('<div class="coordinate pointer-events-none absolute right-16px bottom-8px text-right text-hex-ddd" style="text-shadow: 0 1px #123,0 -1px #123,1px 0 #123,-1px 0 #123,0 0 4px #123"></div>',2),vr=D('<div class="absolute top-0 bottom-0 right-0 overflow-auto bg-white"><table><tbody></tbody></table></div>',6),wr=D('<tr><th colspan="2"></th></tr>',4),Er=D('<tr><td class="text-right"></td><td></td></tr>',6),yr=new TextDecoder("ms932"),Sr=document.head.appendChild(document.createElement("style")),Cr=(e,t)=>{{let n=e.ENTITIES?.find(r=>E(r,5)===t);if(n)return n}if(e.BLOCKS)for(let n of Object.values(e.BLOCKS)){let r=n.find(o=>E(o,5)===t);if(r)return r}},cn=()=>{let e=B(()=>tn(N(),{resolveColorIndex:s=>{let[i,c,a]=Ht[s]??[0,0,50];return`hsl(${i},${c}%,${Math.round(a*.8+20)}%)`},resolveFont:s=>({...s,family:s.family+",var(--font-family)"}),encoding:yr})),t=B(()=>"data:image/svg+xml,"+encodeURIComponent(e())),[n,r]=K([]),o=B(()=>n().map(s=>Cr(N(),s)).filter(Boolean));return ye(()=>{Sr.textContent=n().map(s=>`[data-5="${s}"]`).join(",")+"{stroke-width:3px}"}),[(()=>{let s=gr.cloneNode(!0);return(i=>setTimeout(()=>{let c=i.parentElement.getElementsByClassName("coordinate")[0],a=i.getElementsByTagName("svg")[0];a.style.padding="8px 16px",a.setAttribute("shape-rendering","optimizeSpeed"),a.setAttribute("text-rendering","optimizeSpeed"),a.onpointermove=({currentTarget:l,clientX:f,clientY:u})=>{let{x:d,y:h}=new DOMPoint(f,u).matrixTransform(l.getScreenCTM().inverse());c.textContent=`${Math.round(d)}, ${Math.round(-h)}`},a.onpointerleave=()=>c.textContent="",a.oncontextmenu=l=>l.preventDefault(),ln({svg:a,selector:"intersection",onSelectionStart:({pointerEvent:l,cancel:f})=>{l.button===2?r([]):f()},onSelectionChange:({selectedElements:l})=>{let f=new Set;for(let u of l){let d=u.closest("[data-5]")?.getAttribute("data-5");d&&f.add(d)}r([...f])}})}))(s),X(()=>s.innerHTML=e()),s})(),(()=>{let s=xr.cloneNode(!0);return X(()=>Ct(s,"href",t())),s})(),br.cloneNode(!0),C(oe,{get when(){return o().length!==0},get children(){let s=vr.cloneNode(!0),i=s.firstChild,c=i.firstChild;return O(c,C(G,{get each(){return o()},children:(a,l)=>[(()=>{let f=wr.cloneNode(!0),u=f.firstChild;return O(u,(()=>{let d=wt(()=>l()===0,!0);return()=>d()?`${o().length} ${o().length===1?"entity":"entities"}`:" "})()),f})(),C(G,{each:a,children:([f,u])=>(()=>{let d=Er.cloneNode(!0),h=d.firstChild,p=h.nextSibling;return O(h,f),O(p,u),d})()})]})),s}})]};var an=D('<textarea readonly="" class="w-full h-full resize-none"></textarea>',2),Tr=D('<section class="h-full overflow-auto mx-1em my-0.5em"></section>',2),_r=D('<section class="h-full overflow-auto p-1em"></section>',2),Lr=D("<h3></h3>",2),$r=D('<table class="mb-1em"><tbody></tbody></table>',4),kr=D('<tr><td class="text-right"></td><td></td></tr>',6),Mr=D('<div class="mb-1em"></div>',2),le=e=>{let t=[];for(let n of e)for(let[r]of n)t.includes(r)||t.push(r);return t.sort((n,r)=>n-r)},fn=()=>C(Fe,{get children(){return[C(V,{get when(){return!F()},get children(){return[]}}),C(V,{get when(){return F()==="PREVIEW"},get children(){return C(cn,{})}}),C(V,{get when(){return F()==="DXF"},get children(){let e=an.cloneNode(!0);return O(e,()=>Ge(N())),e}}),C(V,{get when(){return F()==="JSON"},get children(){let e=an.cloneNode(!0);return O(e,()=>JSON.stringify(N(),void 0,2)),e}}),C(V,{get when(){return F()==="HEADER"},get children(){return C(ne,{get columns(){return[9,...le(Object.values(N().HEADER))]},get records(){return Object.entries(N().HEADER)},tdSelector:e=>e===9?([t])=>t:([,t])=>j(t,e).join(`
`)})}}),C(V,{get when(){return F()==="CLASSES"},get children(){return C(ne,{get columns(){return[1,...le(Object.values(N().CLASSES))]},get records(){return Object.entries(N().CLASSES)},tdSelector:e=>e===1?([t])=>t:([,t])=>j(t,e).join(`
`)})}}),C(V,{get when(){return F()==="TABLES"},get children(){return C(ne,{get columns(){return["TABLE",...le(Object.values(N().TABLES).flat())]},get records(){return Object.entries(N().TABLES).flatMap(([e,t])=>t.map(n=>[e,n]))},tdSelector:e=>e==="TABLE"?([t])=>t:([,t])=>j(t,e).join(`
`)})}}),C(V,{get when(){return F()==="BLOCKS"},get children(){return C(ne,{get columns(){return["BLOCK",...le(Object.values(N().BLOCKS).flat())]},get records(){return Object.entries(N().BLOCKS).flatMap(([e,t])=>t.map(n=>[e,n]))},tdSelector:e=>e==="BLOCK"?([t])=>t:([,t])=>j(t,e).join(`
`)})}}),C(V,{get when(){return F()==="ENTITIES"},get children(){return C(ne,{get columns(){return le(N().ENTITIES)},get records(){return N().ENTITIES},tdSelector:e=>t=>j(t,e).join(`
`)})}}),C(V,{get when(){return F()==="OBJECTS"},get children(){let e=Tr.cloneNode(!0);return O(e,C(G,{get each(){return N().OBJECTS},children:t=>[(()=>{let n=Lr.cloneNode(!0);return O(n,()=>E(t,0)),n})(),(()=>{let n=$r.cloneNode(!0),r=n.firstChild;return O(r,C(G,{each:t,children:([o,s])=>(()=>{let i=kr.cloneNode(!0),c=i.firstChild,a=c.nextSibling;return O(c,o),O(a,s),i})()})),n})()]})),e}}),C(V,{get when(){return F()==="ACDSDATA"},get children(){let e=_r.cloneNode(!0);return O(e,C(G,{get each(){return N().ACDSDATA},children:t=>(()=>{let n=Mr.cloneNode(!0);return O(n,C(ne,{get columns(){return le(t)},records:t,tdSelector:r=>o=>j(o,r).join(`
`)})),n})()})),e}})]}});var Ar=D('<label><input type="radio" name="section" hidden=""><span></span></label>',5),Dr=D('<input placeholder="filter" class="border-b border-hex-ccc text-sm leading-none px-2 py-0.5">',1),Or=D('<div class="flex-auto"></div>',2),De=({sectionName:e})=>(()=>{let t=Ar.cloneNode(!0),n=t.firstChild,r=n.nextSibling;return n.addEventListener("change",o=>o.currentTarget.checked&&pe(o.currentTarget.value)),n.value=e,O(r,e),X(()=>n.checked=F()===e),t})(),un=()=>C(oe,{get when(){return F()},get children(){return[C(oe,{get when(){return["HEADER","CLASSES","TABLES","BLOCKS","ENTITIES"].includes(F())},get children(){let e=Dr.cloneNode(!0);return e.$$input=t=>Rt(t.currentTarget.value),X(()=>e.value=Me()),e}}),Or.cloneNode(!0),C(De,{sectionName:"PREVIEW"}),C(De,{sectionName:"DXF"}),C(De,{sectionName:"JSON"}),C(G,{get each(){return Object.keys(N())},children:e=>C(De,{sectionName:e})})]}});St(["input"]);var dn=(e,t)=>{let n=!1;e.addEventListener("dragenter",()=>{n=!0,e.classList.add("dragging")}),e.addEventListener("dragover",r=>{r.preventDefault(),n=!1;let o=r.dataTransfer;o&&(o.types.length===1&&o.types[0]==="Files"||o.items&&o.items.length===1&&o.items[0].kind==="file"?o.dropEffect="copy":o.dropEffect="none")}),e.addEventListener("dragleave",()=>{n||e.classList.remove("dragging")}),e.addEventListener("drop",r=>{r.stopPropagation(),r.preventDefault(),e.classList.remove("dragging");let o=r.dataTransfer;o&&t(o.files[0])})};He(()=>C(un,{}),document.getElementsByTagName("nav")[0]);He(()=>C(fn,{}),document.getElementsByTagName("main")[0]);dn(document.body,e=>{let t=performance.now();e.arrayBuffer().then(n=>{let r=_e(n),o=performance.now();console.debug(e.name,`${o-t} [ms]`),document.getElementsByTagName("h2")[0].textContent=e.name,pe(""),jt(r),pe("PREVIEW")})});
